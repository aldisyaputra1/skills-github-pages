<!DOCTYPE html>
<html>
<head>
    <title>Smart Farm Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <h1>Smart Farm Monitoring</h1>
    <div id="currentData">
        <div>Temperatur: <span id="temp">-</span> °C</div>
        <div>Kelembaban: <span id="hum">-</span> %</div>
        <div>Kelembaban Tanah: <span id="soil">-</span> %</div>
        <div>Intensitas Cahaya: <span id="light">-</span> %</div>
    </div>
    <canvas id="sensorChart" width="400" height="200"></canvas>

    <script>
        async function updateData() {
            try {
                const response = await fetch('/api/latest-data');
                const data = await response.json();
                
                document.getElementById('temp').textContent = data.temperature || '-';
                document.getElementById('hum').textContent = data.humidity || '-';
                document.getElementById('soil').textContent = data.soil_moisture || '-';
                document.getElementById('light').textContent = data.light_intensity || '-';
            } catch (error) {
                console.error('Error fetching data:', error);
            }
        }
        
        // Update data setiap 10 detik
        setInterval(updateData, 10000);
        updateData();
    </script>
</body>
</html>